# Апипик

Библиотека для создания и сравнения дампов API из разных версий Windows 10.
[Пример различия API между Windows 10 1803 -> 1809](https://martinsuchan.github.io/ApiPeek/Diffs/win10.1803.to.win10.1809.fulldiff.html ).
[Упрощенное различие API между Windows 10 1803 -> 1809 только с новыми типами](https://martinsuchan.github.io/ApiPeek/Diffs/win10.1803.to.win10.1809.diff.html ).
**Библиотека ApiPeek** может использоваться в проектах Windows Phone 8.1+ и Windows 8.1+.
** Апипик.Инструмент сравнения** - это простой консольный инструмент в .NET 4.5.2.

## Мотивация

Библиотека ApiPeek была создана осенью 2014 года. Моя цель состояла в том, чтобы создать простую библиотеку для обхода всех доступных OS API на
целевом устройстве с использованием Reflection и сохранить результат в виде группы простых JSON-файлов, каждый из которых представляет одну сборку,
сжатую в один ZIP-файл.

Второй целью этого проекта был инструмент для сравнения двух дампов API из двух разных версий ОС.
Изначально мне удавалось создавать простые текстовые файлы с помощью API diffs,
позже я обновил инструмент сравнения, чтобы генерировать sexy [HTML-древовидные различия со сворачиваемыми разделами](https://martinsuchan.github.io/ApiPeek/Diffs/win10.14257.to.win10.14267.fulldiff.html ).

## Создание проекта

Приложение написано на C# 6.0 и требует наличия Visual Studio 2015 с установленными средствами магазина Windows.
Для приложения также требуется пакет NuGet Json.NET 8.0.2, который загружается автоматически в процессе сборки.

## Создание дампов API

Просто создайте проект **ApiPeek.App.WindowsPhone** и запустите его на своем телефоне или эмуляторе.
Нажмите кнопку **Запустить просмотр API** и подождите пару секунд.
**Появится средство выбора сохранения файла**, выберите, куда вы хотите сохранить файл API dump = .zip.
Тот же подход работает и в Windows 8.1.

## Сравнение двух дампов API

В настоящее время процесс сравнения API требует выполнения некоторых ручных шагов.
Необходимо распаковать оба дампа API внутри **ApiPeek.Проект Compare.App.Console** находится внутри папки **api**.
Не забудьте установить для свойства **Копировать в выходной каталог** для извлеченных файлов значение **Всегда**.
Затем выберите имена целевых папок в **Program.cs** вот так и запустите консольное приложение:

```
строка path1 = "win10.10586";
строка path2 = "win10.14267";
```

Консольное приложение запускается всего на несколько секунд, а затем автоматически сохраняет разницу в папке **bin/[Debug|Release]/html**.

Все различия в API, которые я создал до сих пор, доступны здесь: https://github.com/martinsuchan/martinsuchan.github.io/tree/master/ApiPeek/Diffs
и может быть просмотрен следующим образом: https://martinsuchan.github.io/ApiPeek/Diffs/win10.14257.to.win10.14267.fulldiff.html

## Известные проблемы

Прежде всего, этот инструмент был создан как проект хакатона выходного дня, и документация по коду в основном отсутствует,
поэтому, пожалуйста, имейте в виду, прежде чем копать глубже, как я это сделал :)
Я планирую обновить документацию когда-нибудь в будущем + также удалить некоторые больше не используемые фрагменты кода.

В настоящее время библиотека ApiPeek не собирает всю информацию о доступном API
**Не поддерживается ** Функции прямо сейчас при просмотре API (неполный список):
- переопределение операторов
- ограничения на дженерики
- атрибуты для типов
- вложенные типы

## Ссылки

- [Разработка API отражения](https://blogs.msdn.microsoft.com/dotnet/2012/08/28/evolving-the-reflection-api /)
- [Чистое CSS-сворачиваемое древовидное меню](http://www.thecssninja.com/css/css-tree-menu )

## Лицензия

Этот проект лицензирован по лицензии MIT - подробности смотрите в файле [LICENSE](ЛИЦЕНЗИЯ).